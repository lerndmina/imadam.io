---
interface Props {
  text: string;
  href: string;
  extraclasses?: string;
  onclick?: string;
  newtab?: boolean;
  popup?: boolean;
  popupTitle?: string;
}
var { text, href, extraclasses, onclick, newtab = true, popup = false, popupTitle = "" } = Astro.props as Props;

const classes = `bg-gradient-to-r from-notwhite to-notwhite hover:from-gradient1 hover:to-gradient2 text-transparent bg-clip-text link ${extraclasses ? extraclasses : ""}`;

// If domain exists and is not homeurl then open in new tab.
const homeUrl = "lerndmina.dev";
var target;

const regex = "^(https?://)?(www.)?([^/]+)";
const found = href.match(regex);

if (found && found[3] != homeUrl) {
  if (newtab) {
    target = "_blank";
  }
}

if (popup) {
  if (!popupTitle) {
    popupTitle = text;
  }
  target = "_blank";
  onclick = `openPopup(${href}, ${popupTitle}, ${500}, ${800}); return false;`;
}

import { popupCenter } from "../utils/utils";
---

<a onclick={onclick} target={target} class={classes} href={href}>{text}</a>
<script>
  import { popupCenter } from "../utils/utils";
  function openPopup(url, title, w, h) {
    popupCenter({ url, title, w, h });
  }
</script>
